<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Test Changement d'Onglet - WordPress Environment Indicator
        </title>
        <style>
            body {
                font-family: Arial, sans-serif;
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                background: #f5f5f5;
            }
            .test-section {
                background: white;
                padding: 20px;
                margin: 20px 0;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .test-url {
                background: #e9ecef;
                padding: 10px;
                border-radius: 4px;
                font-family: monospace;
                margin: 10px 0;
                cursor: pointer;
                border: 2px solid transparent;
                transition: all 0.3s ease;
            }
            .test-url:hover {
                border-color: #007bff;
                background: #f8f9fa;
            }
            .instructions {
                background: #d1ecf1;
                border: 1px solid #bee5eb;
                padding: 15px;
                border-radius: 4px;
                margin: 20px 0;
            }
            .badge-info {
                background: #d4edda;
                border: 1px solid #c3e6cb;
                padding: 15px;
                border-radius: 4px;
                margin: 20px 0;
            }
            .wp-admin-bar {
                background: #23282d;
                color: white;
                padding: 10px;
                border-radius: 4px;
                margin: 10px 0;
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                    Roboto, sans-serif;
            }
            .test-steps {
                background: #fff3cd;
                border: 1px solid #ffeaa7;
                padding: 15px;
                border-radius: 4px;
                margin: 20px 0;
            }
            .step {
                margin: 10px 0;
                padding: 10px;
                background: white;
                border-radius: 4px;
                border-left: 4px solid #007bff;
            }
        </style>
    </head>
    <body>
        <h1>
            üîÑ Test du changement d'onglet - WordPress Environment Indicator
        </h1>

        <div class="instructions">
            <h3>üìã Instructions de test</h3>
            <p>
                Cette page vous permet de tester le syst√®me de badges lors des
                changements d'onglet. Le badge doit se mettre √† jour
                automatiquement quand vous changez d'onglet.
            </p>
        </div>

        <div class="test-steps">
            <h3>üß™ √âtapes de test</h3>
            <div class="step">
                <strong>√âtape 1 :</strong> Ouvrez plusieurs onglets avec des
                environnements diff√©rents (d√©veloppement, staging, production)
            </div>
            <div class="step">
                <strong>√âtape 2 :</strong> Observez le badge "env" sur l'ic√¥ne
                de l'extension dans la barre d'outils
            </div>
            <div class="step">
                <strong>√âtape 3 :</strong> Changez d'onglet et v√©rifiez que le
                badge se met √† jour instantan√©ment
            </div>
            <div class="step">
                <strong>√âtape 4 :</strong> Le badge doit dispara√Ætre sur les
                onglets de production ou non-WordPress
            </div>
        </div>

        <div class="test-section">
            <h3>üîß URLs de test pour diff√©rents environnements</h3>
            <p>
                Cliquez sur ces liens pour ouvrir des onglets avec diff√©rents
                environnements :
            </p>

            <div
                class="test-url"
                onclick="openTab('http://localhost/wordpress')"
            >
                <strong>D√©veloppement (localhost) :</strong>
                http://localhost/wordpress
                <br />
                <small>Badge vert "env" attendu</small>
            </div>

            <div
                class="test-url"
                onclick="openTab('https://staging.monsite.com')"
            >
                <strong>Staging :</strong> https://staging.monsite.com
                <br />
                <small>Badge rose "env" attendu</small>
            </div>

            <div class="test-url" onclick="openTab('https://monsite.com')">
                <strong>Production :</strong> https://monsite.com
                <br />
                <small>Aucun badge attendu</small>
            </div>

            <div class="test-url" onclick="openTab('https://github.com')">
                <strong>Site non-WordPress :</strong> https://github.com
                <br />
                <small>Aucun badge attendu</small>
            </div>
        </div>

        <div class="badge-info">
            <h3>üéØ Comportement attendu</h3>
            <ul>
                <li>
                    <strong>Changement d'onglet :</strong> Le badge se met √†
                    jour instantan√©ment
                </li>
                <li>
                    <strong>D√©veloppement :</strong> Badge vert "env"
                    (localhost, .dev, .test, .local)
                </li>
                <li>
                    <strong>Staging :</strong> Badge rose "env" (staging, stage,
                    preview, demo, test)
                </li>
                <li><strong>Production :</strong> Aucun badge</li>
                <li><strong>Non-WordPress :</strong> Aucun badge</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>üîç Simulation de la barre d'administration WordPress</h3>
            <p>
                Voici √† quoi ressemble la barre d'administration WordPress avec
                les badges d'environnement :
            </p>

            <div class="wp-admin-bar">
                <div style="display: flex; align-items: center; gap: 10px">
                    <span>üè†</span>
                    <span>Mon Site WordPress</span>
                    <span
                        style="
                            background: #28a745;
                            color: white;
                            padding: 2px 8px;
                            border-radius: 3px;
                            font-size: 12px;
                        "
                        >Development</span
                    >
                </div>
            </div>

            <div class="wp-admin-bar">
                <div style="display: flex; align-items: center; gap: 10px">
                    <span>üè†</span>
                    <span>Mon Site WordPress</span>
                    <span
                        style="
                            background: #e60076;
                            color: white;
                            padding: 2px 8px;
                            border-radius: 3px;
                            font-size: 12px;
                        "
                        >Staging</span
                    >
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>üìù Notes techniques</h3>
            <ul>
                <li>Les donn√©es d'environnement sont stock√©es par onglet</li>
                <li>
                    Le badge se met √† jour via
                    <code>chrome.tabs.onActivated</code>
                </li>
                <li>
                    Les donn√©es sont nettoy√©es automatiquement quand un onglet
                    est ferm√©
                </li>
                <li>
                    Le syst√®me fonctionne avec plusieurs onglets ouverts
                    simultan√©ment
                </li>
            </ul>
        </div>

        <script>
            function openTab(url) {
                window.open(url, "_blank");
            }

            // Ajouter un indicateur visuel pour les liens cliqu√©s
            document.querySelectorAll(".test-url").forEach((url) => {
                url.addEventListener("click", function () {
                    this.style.borderColor = "#28a745";
                    this.style.background = "#d4edda";
                    setTimeout(() => {
                        this.style.borderColor = "transparent";
                        this.style.background = "#e9ecef";
                    }, 1000);
                });
            });
        </script>
    </body>
</html>
