<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Test Simple - WordPress Environment Indicator</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                background: #f5f5f5;
            }
            .test-section {
                background: white;
                padding: 20px;
                margin: 20px 0;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .test-url {
                background: #e9ecef;
                padding: 10px;
                border-radius: 4px;
                font-family: monospace;
                margin: 10px 0;
                cursor: pointer;
                border: 2px solid transparent;
                transition: all 0.3s ease;
            }
            .test-url:hover {
                border-color: #007bff;
                background: #f8f9fa;
            }
            .instructions {
                background: #d1ecf1;
                border: 1px solid #bee5eb;
                padding: 15px;
                border-radius: 4px;
                margin: 20px 0;
            }
            .badge-info {
                background: #d4edda;
                border: 1px solid #c3e6cb;
                padding: 15px;
                border-radius: 4px;
                margin: 20px 0;
            }
            .success {
                background: #d4edda;
                border: 1px solid #c3e6cb;
                color: #155724;
                padding: 15px;
                border-radius: 4px;
                margin: 20px 0;
            }
        </style>
    </head>
    <body>
        <h1>âœ… Test Simple - WordPress Environment Indicator</h1>

        <div class="success">
            <h3>ðŸŽ‰ SystÃ¨me simplifiÃ© implÃ©mentÃ© !</h3>
            <p>
                Le systÃ¨me de badges utilise maintenant la dÃ©tection directe
                dans le background script, comme dans votre exemple prÃ©cÃ©dent.
            </p>
        </div>

        <div class="instructions">
            <h3>ðŸ“‹ Instructions de test</h3>
            <p>Testez le systÃ¨me de badges simplifiÃ© :</p>
            <ol>
                <li>
                    <strong>Rechargez l'extension</strong> dans Chrome
                    (Extensions â†’ Mode dÃ©veloppeur â†’ Recharger)
                </li>
                <li>
                    <strong>Ouvrez plusieurs onglets</strong> avec diffÃ©rents
                    environnements
                </li>
                <li>
                    <strong>Changez d'onglet</strong> et observez le badge "env"
                    sur l'icÃ´ne de l'extension
                </li>
                <li>
                    <strong
                        >Le badge doit se mettre Ã  jour instantanÃ©ment</strong
                    >
                    lors du changement d'onglet
                </li>
            </ol>
        </div>

        <div class="test-section">
            <h3>ðŸ”§ URLs de test</h3>
            <p>Cliquez sur ces liens pour tester diffÃ©rents environnements :</p>

            <div
                class="test-url"
                onclick="openTab('http://localhost/wordpress')"
            >
                <strong>DÃ©veloppement (localhost) :</strong>
                http://localhost/wordpress
                <br />
                <small>Badge vert "env" attendu</small>
            </div>

            <div
                class="test-url"
                onclick="openTab('https://staging.monsite.com')"
            >
                <strong>Staging :</strong> https://staging.monsite.com
                <br />
                <small>Badge rose "env" attendu</small>
            </div>

            <div class="test-url" onclick="openTab('https://monsite.com')">
                <strong>Production :</strong> https://monsite.com
                <br />
                <small>Aucun badge attendu</small>
            </div>

            <div class="test-url" onclick="openTab('https://github.com')">
                <strong>Site non-WordPress :</strong> https://github.com
                <br />
                <small>Aucun badge attendu</small>
            </div>
        </div>

        <div class="badge-info">
            <h3>ðŸŽ¯ Comportement attendu</h3>
            <ul>
                <li>
                    <strong>Changement d'onglet :</strong> Le badge se met Ã 
                    jour instantanÃ©ment
                </li>
                <li>
                    <strong>DÃ©veloppement :</strong> Badge vert "env"
                    (localhost, 127.x.x.x, .dev, .test, .local)
                </li>
                <li>
                    <strong>Staging :</strong> Badge rose "env" (staging, stage,
                    preview, demo, test)
                </li>
                <li><strong>Production :</strong> Aucun badge</li>
                <li><strong>Non-WordPress :</strong> Aucun badge</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>ðŸ”§ AmÃ©liorations apportÃ©es</h3>
            <ul>
                <li>
                    âœ…
                    <strong>DÃ©tection directe dans le background script</strong>
                    (comme votre exemple)
                </li>
                <li>
                    âœ…
                    <strong
                        >Utilisation de
                        <code
                            >chrome.action.setBadgeText({ tabId, text: 'env'
                            })</code
                        ></strong
                    >
                </li>
                <li>
                    âœ…
                    <strong
                        >Gestion des changements d'onglet avec
                        <code>chrome.tabs.onActivated</code></strong
                    >
                </li>
                <li>
                    âœ…
                    <strong
                        >Gestion des mises Ã  jour d'onglet avec
                        <code>chrome.tabs.onUpdated</code></strong
                    >
                </li>
                <li>
                    âœ…
                    <strong>Suppression de la complexitÃ© inutile</strong>
                    (stockage par onglet, communication complexe)
                </li>
            </ul>
        </div>

        <script>
            function openTab(url) {
                window.open(url, "_blank");
            }

            // Ajouter un indicateur visuel pour les liens cliquÃ©s
            document.querySelectorAll(".test-url").forEach((url) => {
                url.addEventListener("click", function () {
                    this.style.borderColor = "#28a745";
                    this.style.background = "#d4edda";
                    setTimeout(() => {
                        this.style.borderColor = "transparent";
                        this.style.background = "#e9ecef";
                    }, 1000);
                });
            });
        </script>
    </body>
</html>
